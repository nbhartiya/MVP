.profiles{'ng-controller' => 'ProfileShowCtrl'}
  .user-profile
    #profile-carousel.carousel.slide.hidden-phone
      .carousel-inner
        -if @profile.user.chef == true
          -if @profile.covers.present?
            -@profile.covers.each_with_index do |i, index|
              -if index == 0
                .active.item
                  =image_tag i.image
              -else
                .item
                  =image_tag i.image
        -else
          .active.item
            =image_tag "Food 6.jpg"
    -if @profile.user.chef == true
      -if @profile.covers.count > 1
        %a.carousel-control.left.hidden-phone{"data-slide" => "prev", :href => "#profile-carousel"} ‹
        %a.carousel-control.right.hidden-phone{"data-slide" => "next", :href => "#profile-carousel"} ›   
    .container
      -if @profile.user.chef == false 
        .row.user-overview{'ng-init' => "appear='events'"}
          .span5.user-profile-overview
            %table
              %tr
                -if @profile.avatar.present?
                  %td.profile-photo
                    =image_tag @profile.avatar.image 
                -else
                  %td.profile-photo
                    =image_tag "Foodie-Default-Profile-Image.png"
                %td.user-title
                  %h1
                    #{@profile.user.first_name} #{@profile.user.last_name}
                  -if @profile.blurb.present?
                    %h2 
                      =@profile.blurb 
                  -if @profile.neighborhood.present?
                    %h3 
                      =@profile.neighborhood
            .profile-summary-logistics-container
              .profile-summary-logistics
                %ul.nav.profile-button-group
                  -#%li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "badges"'} Badges
                  %li.active
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "events"'} Events
                  %li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "campaigns"'} Campaigns
                  %li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "following"'} Following
                  
            %table.user-social-stats
              %tr.icons
                -#%td
                  %a.sb.star.circle.no-border.no-shadow.black{:href=>"#"}
                %td
                  %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-click' => "follow('Profile',#{@profile.id},#{user_signed_in?})", :href => "#", "data-toggle" => "tooltip", :title => "Click to follow and stay up to date!", "data-placement" => "right"}
                %td{'ng-click'=>'appear = "following"'}
                  %a.sb.heart.circle.no-border.no-shadow.gray.profile-follow
              %tr.user-stats
                -#%td 190
                %td{'ng-click'=>'appear = "followers"'}
                  %a.followers{:href => "#", "data-toggle" => "tooltip", :title => "Check out who's following this person!", "data-placement" => "right"}
                    =@profile.follows.count
                %td
                  =@profile.user.events_followed.count+@profile.user.users_followed.count
              %tr.user-stat-labels
                -#%td points
                %td{'ng-click'=>'appear = "followers"'}
                  %a.followers{:href => "#", "data-toggle" => "tooltip", :title => "Check out who's following this person!", "data-placement" => "right"} followers
                %td following
            
          -if current_user
            -if current_user.id == @profile.user_id
              .span1.edit-button
                %a.btn.btn-inverse{:href=>"/profiles/#{@profile.user_id}/edit"} Edit
          .span6
            -#.badges{'ng-show' => 'appear == "badges"'}
              %h1 Badges
              %table.badges-table
                %tr
                  %td.single-badge
                    =image_tag "Favicon.png"
                  %td.single-badge
                    =image_tag "Favicon.png"
                  %td.single-badge
                    =image_tag "Favicon.png"
                  %td.single-badge
                    =image_tag "Favicon.png"
                  %td.single-badge
                    =image_tag "Favicon.png"
                %tr
                  %td.single-badge
                    =image_tag "Favicon.png"
                  %td.single-badge
                    =image_tag "Favicon.png"
                  %td.single-badge
                    =image_tag "Favicon.png"

            .user-events{'ng-show' => 'appear == "events"'}
              %button.close{"ng-click" => "appear=''", :type => "button"} close
              %h1 Events
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#upcoming-events"} Upcoming
                %li
                  %a{"data-toggle" => "tab", :href => "#past-events"} Past
                %li
                  %a{"data-toggle" => "tab", :href => "#followed-events"} Following
              #myTabContent.tab-content
                #upcoming-events.tab-pane.fade.active.in
                  -if @profile.user.future_events.count > 0
                    %table.events-table
                      %tr.heading
                        %td Name
                        %td Host
                        %td When
                        %td Status
                        %td Price
                      -for event in @profile.user.future_events
                        %tr
                          %td 
                            %a{:href => event_path(event)} 
                              =event.title
                          %td
                            =event.host.profile.biz_name
                          %td
                            =event.date.strftime("%b %e")
                          %td 
                            ="#{event.seats_left} seats left"
                          %td
                            ="$#{"%g" % event.cost}"
                  -else
                    %h3 No upcoming events.
                #past-events.tab-pane.fade
                  -if @profile.user.past_events.count > 0
                    %table.events-table
                      %tr.heading
                        %td Name
                        %td Host
                        %td When
                        %td Price
                      -for event in @profile.user.past_events
                        %tr
                          %td 
                            %a{:href => event_path(event)} 
                              =event.title
                          %td
                            =event.host.profile.biz_name
                          %td
                            =event.date.strftime("%b %e")
                          %td
                            ="$#{"%g" % event.cost}"
                  -else
                    %h3 No past events.
                #followed-events.tab-pane.fade
                  -if @profile.user.events_followed.count > 0
                    %table.events-table
                      %tr.heading 
                        %td Name
                        %td Host
                        %td When
                        %td Status
                        %td Price
                      -for event in @profile.user.events_followed
                        %tr 
                          %td 
                            %a{:href => event_path(event)} 
                              =event.title
                          %td
                            =event.host.profile.biz_name
                          %td
                            =event.date.strftime("%b %e")
                          %td 
                            ="#{event.seats_left} seats left"
                          %td
                            ="$#{"%g" % event.cost}"
                  -else
                    No events followed.

            .user-campaigns{'ng-show' => 'appear == "campaigns"'}
              %button.close{"ng-click" => "appear=''", :type => "button"} close
              %h1 Campaigns
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#joined-campaigns"} Joined
                %li
                  %a{"data-toggle" => "tab", :href => "#started-campaigns"} Started
              #myTabContent.tab-content
                #joined-campaigns.tab-pane.fade.active.in
                  -if @profile.user.campaigns_followed.count > 0
                    %table.campaigns-table
                      %tr.heading
                        %td Business
                        %td Status
                        %td Days Left
                      -for campaign in @profile.user.campaigns_followed
                        %tr
                          %td 
                            %a{:href => campaign_path(campaign)} 
                              =campaign.biz_name
                          %td
                            =campaign.status
                          -if !campaign.expired?
                            %td
                              =campaign.days_left
                  -else
                    No campaigns followed.
                #started-campaigns.tab-pane.fade
                  -if @profile.user.campaigns_started
                    %table.campaigns-table
                      %tr.heading
                        %td Business
                        %td Status
                        %td Days Left
                      -for campaign in @profile.user.campaigns_started
                        %tr 
                          %td
                            %a{:href => campaign_path(campaign)} 
                              =campaign.biz_name
                          %td
                            =campaign.status
                          -if !campaign.expired?
                            %td
                              =campaign.days_left
                  -else
                    No campaigns started.

            .user-following{'ng-show' => 'appear == "following"'}
              %button.close{"ng-click" => "appear=''", :type => "button"} close
              %h1 Following
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#events-following"} Events
                %li
                  %a{"data-toggle" => "tab", :href => "#business-following"} Businesses
                %li
                  %a{"data-toggle" => "tab", :href => "#foodie-following"} Foodies
              #myTabContent.tab-content
                #events-following.tab-pane.fade.active.in
                  -if @profile.user.events_followed.count > 0
                    %table.events-table
                      %tr.heading 
                        %td Name
                        %td Host
                        %td When
                        %td Status
                        %td Price
                      -for event in @profile.user.events_followed
                        %tr 
                          %td 
                            %a{:href => event_path(event)} 
                              =event.title
                          %td
                            =event.host.profile.biz_name
                          %td
                            =event.date.strftime("%b %e")
                          %td 
                            ="#{event.seats_left} seats left"
                          %td
                            ="$#{"%g" % event.cost}"
                  -else
                    No events followed.
                #business-following.tab-pane.fade
                  -if @profile.user.businesses_followed.count > 0
                    %table.following-table
                      %tr.heading
                        %td 
                        %td Name
                        %td Number of Followers
                        %td
                      -for business in @profile.user.businesses_followed
                        %tr
                          %td
                            -if business.profile.avatar.present?
                              =image_tag business.profile.avatar.image
                            -else
                              =image_tag("Chef-Default-Profile-Image.png")
                          %td
                            %a{:href=>"/profiles/#{business.profile.id}"}
                              =business.profile.biz_name
                          %td 
                            =business.profile.follows.count
                          %td
                            %a.sb.heart.circle.no-border.no-shadow.orange.black.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-click' => "follow('Profile',#{business.profile.id},#{user_signed_in?})"}
                  -else
                    No businesses followed.
                #foodie-following.tab-pane.fade
                  -if @profile.user.foodies_followed.count > 0
                    %table.following-table
                      %tr.heading
                        %td 
                        %td Name
                        %td Number of Followers
                        %td
                      -for foodie in @profile.user.foodies_followed
                        %tr 
                          %td
                            -if foodie.profile.avatar.present?
                              =image_tag foodie.profile.avatar.image
                            -else
                              =image_tag("Foodie-Default-Profile-Image.png")
                          %td
                            %a{:href=>"/profiles/#{foodie.profile.id}"}
                              ="#{foodie.first_name} #{foodie.last_name}"
                          %td
                            =foodie.profile.follows.count
                          %td
                            %a.sb.heart.circle.no-border.no-shadow.orange.black.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-click' => "follow('Profile',#{foodie.profile.id},#{user_signed_in?})"}
                  -else
                    No foodies followed.
            .user-followers{'ng-show' => 'appear == "followers"'}
              %button.close{"ng-click" => "appear=''", :type => "button"} close
              %h1 Followers
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#business-followers"} Businesses
                %li
                  %a{"data-toggle" => "tab", :href => "#foodie-followers"} Foodies
              #myTabContent.tab-content
                #business-followers.tab-pane.fade.active.in
                  -if @profile.user.business_followers.count > 0
                    %table.following-table
                      %tr.heading
                        %td 
                        %td Name
                        %td Number of Followers
                        %td
                      -for business in @profile.user.business_followers
                        %tr
                          %td 
                            -if business.profile.avatar.present?
                              =image_tag business.profile.avatar.image
                            -else
                              =image_tag("Chef-Default-Profile-Image.png")
                          %td
                            %a{:href=>"/profiles/#{business.profile.id}"}
                              =business.profile.biz_name
                          %td
                            =business.profile.follows.count
                          %td
                            %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-click' => "follow('Profile',#{business.profile.id},#{user_signed_in?})"}
                  -else
                    No business followers.
                #foodie-followers.tab-pane.fade
                  -if @profile.user.foodie_followers.count > 0
                    %table.following-table
                      %tr.heading
                        %td 
                        %td Name
                        %td Number of Followers
                        %td
                      -for foodie in @profile.user.foodie_followers
                        %tr 
                          %td 
                            -if foodie.profile.avatar.present?
                              =image_tag foodie.profile.avatar.image
                            -else
                              =image_tag("Foodie-Default-Profile-Image.png")
                          %td 
                            %a{:href=>"/profiles/#{foodie.profile.id}"}
                              ="#{foodie.first_name} #{foodie.last_name}"
                          %td
                            =foodie.profile.follows.count
                          %td
                            %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-click' => "follow('Profile',#{foodie.profile.id},#{user_signed_in?})"}
                  -else
                    No foodie followers.

      -else
        .row.user-overview{'ng-init' => "appear='events'"}
          .span5.user-profile-overview
            %table
              %tr
                -if @profile.avatar.present?
                  %td.profile-photo
                    =image_tag @profile.avatar.image 
                -else
                  %td.profile-photo
                    =image_tag "Chef-Default-Profile-Image.png"
                %td.user-title
                  %h1
                    =@profile.biz_name 
                  %h2 
                    =@profile.blurb 
            .profile-summary-logistics-container
              .profile-summary-logistics
                -if @profile.location.present?
                  %h3 
                    #{@profile.location.address1} <br> #{@profile.location.city}, #{@profile.location.state} #{@profile.location.zipcode}

                %ul.nav.profile-button-group
                  %li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "news"'} News
                  %li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "story"'} Story
                  %li.active
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "events"'} Events
                  -if @profile.follows.count > 0
                    %li
                      %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "following"'} Following
            %table.user-social-stats
              %tr.icons
                %td
                  %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-click' => "follow('Profile',#{@profile.id},#{user_signed_in?})", :href => "#", "data-toggle" => "tooltip", :title => "Click to follow and stay up to date!", "data-placement" => "right"}
                %td
                  %a.sb.star.circle.no-border.no-shadow.black{:href=>"#"} 
                %td
                  %a.sb.facebook.circle.no-border.no-shadow.black{:href => "#", :onclick => "\r\n    window.open(\r\n      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href), \r\n      'facebook-share-dialog', \r\n      'width=626,height=436'); \r\n    return false;"}
              %tr.user-stats
                %td{'ng-click'=>'appear = "followers"'}
                  %a.followers{:href => "#", "data-toggle" => "tooltip", :title => "Check out who's following this business!", "data-placement" => "right"}
                    =@profile.follows.count
                %td 190
                %td{:rowspan => "2"} share
              %tr.user-stat-labels
                %td{'ng-click'=>'appear = "followers"'} 
                  %a.followers{:href => "#", "data-toggle" => "tooltip", :title => "Check out who's following this business!", "data-placement" => "right"} followers
                %td reviews
          -if current_user
            -if current_user.id == @profile.user_id
              .span1.edit-button
                %a.btn.btn-inverse{:href=>"/profiles/#{@profile.user_id}/edit"} Edit
          .span6
            .user-news{'ng-show' => 'appear == "news"'}
              %button.close{"ng-click" => "appear=''", :type => "button"} close
              %h1 News
              %h3 
                =@profile.news

            .user-story{'ng-show' => 'appear == "story"'}
              %button.close{"ng-click" => "appear=''", :type => "button"} close
              %h1 Host Story
              %h3 
                =@profile.story

            .user-events{'ng-show' => 'appear == "events"'}
              %button.close{"ng-click" => "appear=''", :type => "button"} close
              %h1 Events
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#upcoming-events"} Upcoming
                %li
                  %a{"data-toggle" => "tab", :href => "#past-events"} Past
              #myTabContent.tab-content
                #upcoming-events.tab-pane.fade.active.in
                  -if @profile.future_host_events.count > 0
                    %table.events-table
                      %tr.heading
                        %td Name
                        %td When
                        %td Status
                        %td Price
                        -#%td Shares  
                      -for event in @profile.future_host_events
                        %tr
                          %td 
                            %a{:href => event_path(event)} 
                              =event.title
                          %td 
                            =event.date.strftime("%b %e")
                          %td 
                            ="#{event.guests_count} of #{event.people_limit} filled"
                          %td 
                            ="$#{"%g" % event.cost}"
                          -#%td 
                            =# shared
                  -else
                    ="Looks like #{@profile.biz_name} has no upcoming events."
                #past-events.tab-pane.fade
                  -if @profile.past_host_events.count > 0
                    %table.events-table
                      %tr.heading
                        %td Name
                        %td When
                        %td Price
                        -#%td Shares  
                      -for event in @profile.future_host_events
                        %tr
                          %td 
                            %a{:href => event_path(event)} 
                              =event.title
                          %td 
                            =event.date.strftime("%b %e")
                          %td 
                            ="$#{"%g" % event.cost}"
                          -#%td 
                            =# shared
                  -else
                    ="Looks like #{@profile.biz_name} has no past events."

            .user-followers{'ng-show' => 'appear == "followers"'}
              %button.close{"ng-click" => "appear=''", :type => "button"} close
              %h1 Followers
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#business-following"} Foodies
                %li
                  %a{"data-toggle" => "tab", :href => "#foodie-following"} Businesses
              #myTabContent.tab-content
                #foodie-following.tab-pane.fade.active.in
                #foodie-followers.tab-pane.fade
                  -if @profile.user.foodie_followers.count > 0
                    %table.following-table
                      %tr.heading
                        %td 
                        %td Name
                        %td Number of Followers
                        %td
                      -for foodie in @profile.user.foodie_followers
                        %tr 
                          %td 
                            -if foodie.profile.avatar.present?
                              =image_tag foodie.profile.avatar.image
                            -else
                              =image_tag("Foodie-Default-Profile-Image.png")
                          %td
                            %a{:href=>"/profiles/#{foodie.profile.id}"}
                              ="#{foodie.first_name} #{foodie.last_name}"
                          %td
                            =foodie.profile.follows.count
                          %td
                            %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-click' => "follow('Profile',#{foodie.profile.id},#{user_signed_in?})"}
                  -else
                    No foodie followers.
                #business-following.tab-pane.fade
                  -if @profile.user.business_followers.count > 0
                    %table.following-table
                      %tr.heading
                        %td 
                        %td Name
                        %td Number of Followers
                        %td
                      -for business in @profile.user.business_followers
                        %tr 
                          %td 
                            -if business.profile.avatar.present?
                              =image_tag business.profile.avatar.image
                            -else
                              =image_tag("Foodie-Default-Profile-Image.png")
                          %td
                            %a{:href=>"/profiles/#{business.profile.id}"}
                              =business.profile.biz_name
                          %td
                            =business.profile.follows.count
                          %td
                            %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-click' => "follow('Profile',#{business.profile.id},#{user_signed_in?})"}
                  -else
                    No business followers.

            .user-following{'ng-show' => 'appear == "following"'}
              %button.close{"ng-click" => "appear=''", :type => "button"} close
              %h1 Following
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#business-following"} Businesses
                %li
                  %a{"data-toggle" => "tab", :href => "#foodie-following"} Foodies
              #myTabContent.tab-content
                #business-following.tab-pane.fade.active.in
                  -if @profile.user.businesses_followed.count > 0
                    %table.following-table
                      %tr.heading
                        %td 
                        %td Name
                        %td Number of Followers
                        %td
                      -for business in @profile.user.businesses_followed
                        %tr
                          %td
                            -if business.profile.avatar.present?
                              =image_tag business.profile.avatar.image
                            -else
                              =image_tag("Chef-Default-Profile-Image.png")
                          %td 
                            %a{:href=>"/profiles/#{business.profile.id}"}
                              =business.profile.biz_name
                          %td 
                            =business.profile.follows.count
                          %td
                            %a.sb.heart.circle.no-border.no-shadow.orange.black.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-click' => "follow('Profile',#{business.profile.id},#{user_signed_in?})"}
                  -else
                    No businesses followed.
                #foodie-following.tab-pane.fade
                  -if @profile.user.foodies_followed.count > 0
                    %table.following-table
                      %tr.heading
                        %td 
                        %td Name
                        %td Number of Followers
                        %td
                      -for foodie in @profile.user.foodies_followed
                        %tr 
                          %td
                            -if foodie.profile.avatar.present?
                              =image_tag foodie.profile.avatar.image
                            -else
                              =image_tag("Foodie-Default-Profile-Image.png")
                          %td
                            %a{:href=>"/profiles/#{foodie.profile.id}"}
                              ="#{foodie.first_name} #{foodie.last_name}"
                          %td
                            =foodie.profile.follows.count
                          %td
                            %a.sb.heart.circle.no-border.no-shadow.orange.black.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-click' => "follow('Profile',#{foodie.profile.id},#{user_signed_in?})"}
                  -else
                    No foodies followed.