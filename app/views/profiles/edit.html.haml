.profiles{'ng-controller' => 'ProfileEditCtrl', 'ng-init' => "getProfile(#{@profile.id})"}
  .user-profile
    -if @profile.covers.present? && @profile.user.chef == true
      #remove-image.btn.edit{"ng-click" => "removeImages()"} remove image
    #remove-image.btn{"ng-click" => "removeImages()"} remove image
    #profile-carousel.carousel.slide.hidden-phone
      .carousel-inner
        -if @profile.user.chef == true
          -if @profile.covers.present?
            -@profile.covers.each_with_index do |i, index|
              -if index == 0
                .item.active
                  = image_tag i.image
              -else
                .item
                  = image_tag i.image
          -else
            %p This is a default cover photo. <br> Replace by uploading cover images!
            .item.active.default
              =image_tag "Food 9.jpg"
        -else
          .item.active.default
            =image_tag "Food 9.jpg"
    -if @profile.covers.count > 1
      %a.carousel-control.left.hidden-phone{"data-slide" => "prev", :href => "#profile-carousel"} ‹
      %a.carousel-control.right.hidden-phone{"data-slide" => "next", :href => "#profile-carousel"} ›
        
    .container
      -if @profile.user.chef == false 
        .row.user-overview
          .span5.user-profile-overview
            %table
              %tr
                -if @profile.avatar.present?
                  %td.profile-photo
                    =image_tag @profile.avatar.image 
                -else
                  %td.profile-photo
                    =image_tag "Foodie-Default-Profile-Image.png"
                %td.user-title
                  %h1#default-text{'ng-show'=>'profile.name=="" || profile.name==nil'} #{@profile.user.first_name} #{@profile.user.last_name}
                  %h1
                    {{profile.name}}
                  %h2#default-text{'ng-show'=>'profile.blurb=="" || profile.blurb==nil'} #{@profile.blurb}
                  %h2 
                    {{profile.blurb}}   

            .profile-summary-logistics-container
              .profile-summary-logistics
                %h3#default-text{'ng-show'=>'profile.neighborhood=="" || profile.neighborhood==nil'} Your Neighborhood
                %h3
                  {{profile.neighborhood}}
                %h3#default-text{'ng-show'=>'profile.city=="" || profile.city==nil || profile.state=="" || profile.state==nil || profile.zip=="" || profile.zip==nil'} Your City, State and Zipcode       
                %h3{'ng-hide' => 'profile.zip=="" || profile.zip==nil'} {{profile.city + ','}} {{profile.state}} {{profile.zip}}
                %ul.nav.profile-button-group
                  %li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "events"'} Events
                  %li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "campaigns"'} Campaigns
                  %li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "following"'} Following
          .span1.edit-button
            %button.btn.btn-inverse{'ng-click' => 'appear="edit"'} Edit
          .span6
            .user-events{'ng-show' => 'appear == "events"'}
              %h1 Events
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#upcoming-events"} Upcoming
                %li
                  %a{"data-toggle" => "tab", :href => "#past-events"} Past
                %li
                  %a{"data-toggle" => "tab", :href => "#followed-events"} Following
              #myTabContent.tab-content
                #upcoming-events.tab-pane.fade.active.in
                  %table.events-table
                    %tr 
                      %td name
                      %td host
                      %td date/time
                      %td location
                      %td # friends going
                      %td # seats left @ $price
                    %tr.current-user-rank
                      %td name
                      %td host
                      %td date/time
                      %td location
                      %td # friends going
                      %td # seats left @ $price
                    %tr 
                      %td name
                      %td host
                      %td date/time
                      %td location
                      %td # friends going
                      %td # seats left @ $price
                #past-events.tab-pane.fade
                  %table.events-table
                    %tr 
                      %td name
                      %td host
                      %td date/time
                      %td event feedback link
                      %td next event link
                    %tr 
                      %td name
                      %td host
                      %td date/time
                      %td event feedback link
                      %td next event link
                    %tr 
                      %td name
                      %td host
                      %td date/time
                      %td event feedback link
                      %td next event link
                #followed-events.tab-pane.fade
                  %table.events-table
                    %tr 
                      %td name
                      %td host
                      %td date/time
                      %td # friends going
                      %td # seats left @ $price
                    %tr 
                      %td name
                      %td host
                      %td date/time
                      %td # friends going
                      %td # seats left @ $price
                    %tr 
                      %td name
                      %td host
                      %td date/time
                      %td # friends going
                      %td # seats left @ $price
            .user-campaigns{'ng-show' => 'appear == "campaigns"'}
              %h1 Campaigns
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#joined-campaigns"} Joined
                %li
                  %a{"data-toggle" => "tab", :href => "#started-campaigns"} Started
              #myTabContent.tab-content
                #joined-campaigns.tab-pane.fade.active.in
                  %table.campaigns-table
                    %tr 
                      %td host
                      %td X people to tilt
                      %td status/days left
                    %tr.current-user-rank
                      %td host
                      %td X people to tilt
                      %td status/days left
                    %tr 
                      %td host
                      %td X people to tilt
                      %td status/days left
                #started-campaigns.tab-pane.fade
                  %table.campaigns-table
                    %tr 
                      %td host
                      %td X people to tilt
                      %td status/days left
                    %tr 
                      %td host
                      %td X people to tilt
                      %td status/days left
                    %tr 
                      %td host
                      %td X people to tilt
                      %td status/days left

            .user-following{'ng-show' => 'appear == "following"'}
              %h1 Following
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#business-following"} Businesses
                %li
                  %a{"data-toggle" => "tab", :href => "#foodie-following"} Foodies
              #myTabContent.tab-content
                #business-following.tab-pane.fade.active.in
                  %table.following-table
                    %tr 
                      %td 
                        =link_to image_tag("Chef-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.orange.black.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}
                    %tr.current-user-rank
                      %td 
                        =link_to image_tag("Chef-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.orange.black.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}
                    %tr 
                      %td 
                        =link_to image_tag("Chef-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.orange.black.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}
                #foodie-following.tab-pane.fade
                  %table.following-table
                    %tr 
                      %td 
                        =link_to image_tag("Foodie-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.orange.black.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}
                    %tr 
                      %td 
                        =link_to image_tag("Foodie-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.orange.black.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}
                    %tr 
                      %td 
                        =link_to image_tag("Foodie-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.orange.black.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}

            %form.user-summary-edit.clearfix{'ng-show' => "appear=='edit'", :name => 'profile_edit'}
              %button.close{"ng-click" => "appear=''", :type => "button"} close
              
              %input#profile-name{'ng-model'=>'profile.name', :type=>"text", :placeholder =>"Your Name", :required => "required", :name => "profile_name", 'ng-class' => "{error: profile_edit.profile_name.$invalid}"}

              %textarea#profile-blurb{:rows => "2", 'ng-model'=>'profile.blurb', :type=>"text", :placeholder =>"You, in the length of a tweet", :maxlength => "140", :name => "profile_blurb", :required => "required", 'ng-class' => "{error: profile_edit.profile_blurb.$invalid}"}

              %select#neighborhoods{'ng-model'=>'profile.neighborhood', :name => "profile_neighborhood", :required => "required", 'ng-class' => "{error: profile_edit.profile_neighborhood.$invalid}"}

              %input#profile-city{'ng-model'=>'profile.city', :type=>"text", :placeholder =>"Your City", :required => "required", :name => "profile_city", 'ng-class' => "{error: profile_edit.profile_city.$invalid}"}

              %select#state{'ng-model'=>'profile.state', :required => "required", :name => "profile_state", 'ng-class' => "{error: profile_edit.profile_state.$invalid}"}

              %input#profile-zip{'ng-model' => 'profile.zip', :type=>"text", :placeholder =>"Your Zip", :required => "required", :name => "profile_zip", :maxlength => "5", 'ng-pattern' => '/^[0-9]{5}$/', 'ng-class' => "{error: profile_edit.profile_zip.$invalid}"}
              
              .help-block{'ng-show' => 'profile_edit.profile_zip.$error.pattern'} Please enter a valid zip code

              .help-block{'ng-show' => 'profile_edit.profile_name.$error.required || profile_edit.profile_blurb.$error.required || profile_edit.profile_neighborhood.$error.required || profile_edit.profile_city.$error.required || profile_edit.profile_state.$error.required || profile_edit.profile_zip.$error.required'} All fields are required

              .clearfix
                %button.btn#profile-images-button{'ng-click'=> 'uploadProfileImage()'} Change Profile Picture
              %button.btn.btn-warning#submit{'ng-disabled' => 'profile_edit.$invalid', 'ng-click' => 'saved = true'} Save Changes
              .help-block{'ng-show' => "saved"} Saved! (feel free to continue to make edits and save again)

      -else
        .row.user-overview
          .span5.user-profile-overview
            %table
              %tr
                -if @profile.avatar.present?
                  %td.profile-photo
                    =image_tag @profile.avatar.image 
                -else
                  %td.profile-photo
                    =image_tag "Chef-Default-Profile-Image.png"
                %td.user-title
                  %h1#default-text{'ng-show'=>'profile.name=="" || profile.name==nil'} #{@profile.user.first_name} #{@profile.user.last_name}
                  %h1
                    {{profile.name}}
                  %h2#default-text{'ng-show'=>'profile.blurb=="" || profile.blurb==nil'} #{@profile.blurb}
                  %h2 
                    {{profile.blurb}}   

            .profile-summary-logistics-container
              .profile-summary-logistics
                %h3#default-text{'ng-show'=>'profile.neighborhood=="" || profile.neighborhood==nil'} Your Neighborhood
                %h3
                  {{profile.neighborhood}}
                %h3#default-text{'ng-show'=>'profile.address=="" || profile.address==nil'} Your Address
                %h3
                  {{profile.address}}
                %h3#default-text{'ng-show'=>'profile.city=="" || profile.city==nil || profile.state=="" || profile.state==nil || rofile.zip=="" || profile.zip==nil'} Your City, State and Zipcode       
                %h3{'ng-hide' => 'profile.zip=="" || profile.zip==nil'} {{profile.city + ','}} {{profile.state}} {{profile.zip}}
                %ul.nav.profile-button-group
                  %li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "news"'} News
                  %li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "story"'} Story
                  %li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "events"'} Events
                  %li
                    %button.btn.btn-inverse{'data-toggle' => 'pill', 'ng-click' => 'appear = "following"'} Following
          .span1.edit-button
            %button.btn.btn-inverse{'ng-click' => 'appear="edit"'} Edit
          .span6
            .user-news{'ng-show' => 'appear == "news"'}
              %h1 News
              .pre-edit{'ng-hide' => 'edit == "news"'}
                %h3 Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait
                %button.btn.btn-inverse.edit{'ng-click' => 'edit = "news"'} Edit
              .edit-form{'ng-show' => 'edit == "news"'}
                %form{:name => 'edit_news'}
                  %textarea.clearfix{:rows => 3, :placeholder => 'News', :name => 'news', :required => "required", 'ng-model' => 'profile.news', 'ng-class' => "{error: edit_news.news.$invalid}"}
                  .help-block{'ng-show' => 'edit_news.news.$error.required'} Required
                  %button.btn.btn-warning.edit{'ng-disabled' => 'edit_news.$invalid'} Save Changes

            .user-story{'ng-show' => 'appear == "story"'}
              %h1 Host Story
              .pre-edit{'ng-hide' => 'edit == "story"'}
                %h3 
                  =@profile.story
                %button.btn.btn-inverse.edit{'ng-click' => 'edit = "story"'} Edit              
              .edit-form{'ng-show' => 'edit == "story"'}
                %form{:name => 'edit_story'}
                  %textarea.clearfix{:rows => 3, :placeholder => 'Story', :name => 'story', :required => "required", 'ng-model' => 'profile.story', 'ng-class' => "{error: edit_story.story.$invalid}"}
                  .help-block{'ng-show' => 'edit_story.story.$error.required'} Required
                  %button.btn.btn-warning.edit{'ng-disabled' => 'edit_story.$invalid'} Save Changes


            .user-events{'ng-show' => 'appear == "events"'}
              %h1 Events
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#upcoming-events"} Upcoming
                %li
                  %a{"data-toggle" => "tab", :href => "#past-events"} Past
              #myTabContent.tab-content
                #upcoming-events.tab-pane.fade.active.in
                  %table.events-table
                    %tr 
                      %td name
                      %td date/time
                      %td # of total seats filled @ $price
                      %td total revenue
                      %td # following
                      %td # shared
                    %tr.current-user-rank
                      %td name
                      %td date/time
                      %td # of total seats filled @ $price
                      %td total revenue
                      %td # following
                      %td # shared
                    %tr 
                      %td name
                      %td date/time
                      %td # of total seats filled @ $price
                      %td total revenue
                      %td # following
                      %td # shared
                #past-events.tab-pane.fade
                  %table.events-table
                    %tr 
                      %td name
                      %td date/time
                      %td # of total seats filled @ $price
                      %td total revenue
                      %td event feedback stats(?)
                    %tr 
                      %td name
                      %td date/time
                      %td # of total seats filled @ $price
                      %td total revenue
                      %td event feedback stats(?)
                    %tr 
                      %td name
                      %td date/time
                      %td # of total seats filled @ $price
                      %td total revenue
                      %td event feedback stats(?)

            .user-following{'ng-show' => 'appear == "following"'}
              %h1 Following
              %ul.nav.nav-tabs
                %li.active
                  %a{"data-toggle" => "tab", :href => "#business-following"} Businesses
                %li
                  %a{"data-toggle" => "tab", :href => "#foodie-following"} Foodies
              #myTabContent.tab-content
                #business-following.tab-pane.fade.active.in
                  %table.following-table
                    %tr 
                      %td 
                        =link_to image_tag("Chef-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}
                    %tr.current-user-rank
                      %td 
                        =link_to image_tag("Chef-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}
                    %tr 
                      %td 
                        =link_to image_tag("Chef-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}
                #foodie-following.tab-pane.fade
                  %table.following-table
                    %tr 
                      %td 
                        =link_to image_tag("Foodie-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}
                    %tr 
                      %td 
                        =link_to image_tag("Foodie-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}
                    %tr 
                      %td 
                        =link_to image_tag("Foodie-Default-Profile-Image.png"), "#"
                      %td Name
                      %td Number of Followers
                      %td
                        %a.sb.heart.circle.no-border.no-shadow.black.orange.profile-follow{'ng-controller'=>'HeartCtrl', 'ng-init' => "wah='#{'yomomma'}'", 'ng-click' => 'follow()'}

            %form.user-summary-edit.clearfix{:name => "profile_edit", 'ng-show' => "appear=='edit'", :id => "profile_edit"}
              %button.close{"ng-click" => "appear=''", :type => "button"} close

              %input#profile-name{'ng-model'=>'profile.name', :type=>"text", :placeholder =>"Your Name", :required => "required", :name => "profile_name", 'ng-class' => "{error: profile_edit.profile_name.$invalid}"}

              %textarea#profile-blurb{:rows => "2", 'ng-model'=>'profile.blurb', :type=>"text", :placeholder =>"You, in the length of a tweet (you can add more under 'Our Story')", :maxlength => "140", :name => "profile_blurb", :required => "required", 'ng-class' => "{error: profile_edit.profile_blurb.$invalid}"}

              %select#neighborhoods{'ng-model'=>'profile.neighborhood', :name => "profile_neighborhood", :required => "required", 'ng-class' => "{error: profile_edit.profile_neighborhood.$invalid}"}

              %input#profile-address{'ng-model'=>'profile.address', :type=>"text", :placeholder =>"Your Business Address", :required => "required", :name => "profile_address", 'ng-class' => "{error: profile_edit.profile_address.$invalid}"}

              %input#profile-city{'ng-model'=>'profile.city', :type=>"text", :placeholder =>"Your City", :required => "required", :name => "profile_city", 'ng-class' => "{error: profile_edit.profile_city.$invalid}"}

              %select#state{'ng-model'=>'profile.state', :required => "required", :name => "profile_state", 'ng-class' => "{error: profile_edit.profile_state.$invalid}"}

              %input#profile-zip{'ng-model' => 'profile.zip', :type=>"text", :placeholder =>"Your Zip", :required => "required", :name => "profile_zip", :maxlength => "5", 'ng-pattern' => '/^[0-9]{5}$/', 'ng-class' => "{error: profile_edit.profile_zip.$invalid}"}
              
              .help-block{'ng-show' => 'profile_edit.profile_zip.$error.pattern'} Please enter a valid zip code

              .help-block{'ng-show' => 'profile_edit.profile_name.$error.required || profile_edit.profile_blurb.$error.required || profile_edit.profile_address.$error.required || profile_edit.profile_city.$error.required || profile_edit.profile_state.$error.required || profile_edit.profile_zip.$error.required || profile_edit.profile_neighborhood.$error.required'} All fields are required

              .clearfix
                %button.btn#profile-images-button{'ng-click'=> 'uploadProfileImage()'} Change Profile Picture
                %button.btn#cover-images-button{'ng-click'=> 'uploadImages()'} Change Cover Image
                %button.btn#yelp-connect{'ng-click' => 'yelp=true'} Connect Yelp
                %input#yelp{'ng-model'=>'profile.yelp', :name => "profile_yelp", 'ng-class' => "{error: profile_edit.profile_yelp.$invalid}", :form => "profile_edit", 'ng-show' => 'yelp', :type => "url", :placeholder => 'Please enter your Yelp URL'}
                .help-block{'ng-show' => 'profile_edit.profile_yelp.$error.url'} Please enter a valid Yelp URL
                %span#yelp-explanation <a data-toggle = "tooltip" id = "why-yelp" title = "So guests know how great you already are and can easily leave you reviews!">Why?</a>
              %button.btn.btn-warning#submit{'ng-disabled' => 'profile_edit.$invalid', 'ng-click' => 'saved = true'} Save Changes
              .help-block{'ng-show' => "saved"} Saved! (feel free to continue to make edits and save again)

                
