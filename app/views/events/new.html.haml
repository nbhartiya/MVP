.events{'ng-controller' => 'EventCreateCtrl'}
  .event-profile
    #event-carousel.carousel.slide.hidden-phone           
      .carousel-inner
        .active.item
          %p This is a default cover photo. <br> Replace by uploading images!
          =image_tag "Food 26.jpg"
    .container
      .event-registration.row
        .span5.event-create
          %form.event-create-form.clearfix{'ng-init'=> "event.host_id=#{current_user.id}", :name => "event_create"}
            
            %input#event-title{'ng-model' => 'event.title', :type=>"text", :placeholder =>"Event Title", :name => "event_title", :required => "required", 'ng-class' => "{error: event_create.event_title.$invalid}", :maxlength => "60"}
            
            %textarea#event-blurb{:rows => "2", 'ng-model' => 'event.blurb', :type=>"text", :placeholder =>"Event Blurb - you get the length of a tweet. Make it sexy ;)", :name => "event_blurb", :maxlength => "140", :required => "required", 'ng-class' => "{error: event_create.event_blurb.$invalid}"}

            %textarea#event-blurb{:rows => "3", 'ng-model' => 'event.description', :type=>"text", :placeholder =>"Event Details - a longer description of your event", :name => "event_details", :required => "required", 'ng-class' => "{error: event_create.event_details.$invalid}"}

            #event-ticket-details
              .input-prepend
                %span.add-on $
                %input#prependedInput#ticket-cost{'ng-model' => 'event.cost',:type=>"text", :required => "required", :name => "event_cost", 'ng-pattern' => '/^[+-]?[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?$/', 'ng-class' => "{error: event_create.event_cost.$invalid}", :placeholder => "Ticket Price"}

              %input#people-limit{'ng-model' => 'event.people_limit',:type=>"text", :name => "event_limit", 'ng-pattern' => '/^[0-9]+$/', :required => "required", 'ng-class' => "{error: event_create.event_limit.$invalid}", :placeholder => "Number of Seats"}
              
              .help-block-white{'ng-show' => 'event_create.event_cost.$error.pattern'} Please enter a valid event cost
              .help-block-white{'ng-show' => 'event_create.event_limit.$error.pattern'} Please enter a valid number of seats

            %button.clearfix.btn#event-images-button{'ng-click'=> 'uploadImages()'} Upload Images
            %button.clearfix.btn#event-menu-button{'ng-click' => 'uploadMenu()'} Upload Menu
            .menu 
            %hr

            #event-date-time 
              %p Date and Time
              %input#event-date{'ng-model' => 'event.date', :type=>"date", :name => "event_date", :required => "required", :min => '{{today}}', 'ng-class' => "{error: event_create.event_date.$invalid}"}

              %select#times{'ng-model' => 'event.time', :name => "event_time", :required => "required", 'ng-class' => "{error: event_create.event_time.$invalid}"}

              %select#duration{'ng-model' => 'event.length', :name => "event_duration", :required => "required", 'ng-class' => "{error: event_create.event_duration.$invalid}"}
                %option{:value => ''} Length
                %option{:value => 30} 30 min
                %option{:value => 60} 1 hr
                %option{:value => 90} 1.5 hrs
                %option{:value => 120} 2 hrs
                %option{:value => 150} 2.5 hrs
                %option{:value => 180} 3 hrs
                %option{:value => 210} 3.5 hrs
                %option{:value => 240} 4 hrs
                %option{:value => 270} 4.5 hrs
                %option{:value => 300} 5 hrs

            #event-location
              %p Location (guests see full address after purchase)

              %select#neighborhoods{'ng-model' => 'event.location.neighborhood', :required => "required", :name => "event_neighborhood", 'ng-class' => "{error: event_create.event_neighborhood.$invalid}"}

              %input#event-address{'ng-model' => 'event.location.address1',:type=>"text", :placeholder =>"Address", :required => "required", :name => "event_address", 'ng-class' => "{error: event_create.event_address.$invalid}"}

              %input#event-city{'ng-model' => 'event.location.city',:type=>"text", :placeholder =>"City", :required => "required", :name => "event_city", 'ng-class' => "{error: event_create.event_city.$invalid}"}
  
              %select#state{'ng-model' => 'event.location.state', :required => "required", :name => "event_state", 'ng-class' => "{error: event_create.event_state.$invalid}"}

              %input#event-zipcode{'ng-model' => 'event.location.zipcode',:type=>"text", :maxlength => "5", :required => "required", 'ng-pattern' => '/^[0-9]{5}$/', :name => "event_zip", 'ng-class' => "{error: event_create.event_zip.$invalid}", :placeholder => "Zipcode"}

            #event-accommodations
              %p I can accommodate

              %input{:name => "vegetarians", :type => "checkbox", :value => "vegetarians", :id => "vegetarians"}
              %label{:for => "vegetarians"} Vegetarians

              %input{:name => "vegans", :type => "checkbox", :value => "vegans", :id => "vegans"}
              %label{:for => "vegans"} Vegans

              %input{:name => "gluten_free", :type => "checkbox", :value => "gluten-free", :id => "gluten_free"}
              %label{:for => "gluten_free"} Gluten-Free

              .help-block-white{'ng-show' => 'event_create.event_zip.$error.pattern'} Please enter a valid zip code

            .help-block-white{'ng-show' => 'event_create.event_title.$error.required || event_create.event_blurb.$error.required || event_create.event_date.$error.required || event_create.event_time.$error.required || event_create.event_duration.$error.required || event_create.event_neighborhood.$error.required || event_create.event_address.$error.required || event_create.event_city.$error.required || event_create.event_state.$error.required || event_create.event_zip.$error.required || event_create.event_cost.$error.required || event_create.event_limit.$error.required || event_create.event_details.$error.required'} All fields are required

            %button.btn.btn-warning.standalone-button#submit{'ng-click' => 'createEvent(event)', 'ng-disabled' => 'event_create.$invalid'} Create Event

          .event-create-confirmation{'ng-show' => 'created'}
            %h2 Thanks! You'll get an email when your event is approved and public. 
            %a.btn.btn-warning#ok-button{:href => "/events"} Check Out More Cool Events!
        .span5
          .event-summary.preview-box
            #ribbon.preview
              .container
                .base
                  %h3#default-text{'ng-show'=>'event.cost=="" || event.cost==nil'}
                    $ Price
                  %h3{'ng-hide' => 'event.cost=="" || event.cost==nil'}
                    ${{event.cost}}
                .left_corner
                .right_corner
            .preview-label{'ng-click' => 'removeImages()'} this is a preview
            .event-summary-top
              %h1#default-text{'ng-show'=>'event.title=="" || event.title==nil'}
                Event Title
              %h1 
                {{event.title}}
              -#TODO CHANGE to current.user.profile.biz_name != nil once we require everyone to fill profile
              -if current_user.profile != nil
                %h2
                  Hosted by: 
                  =current_user.profile.biz_name
              -else
                %h2#default-text
                  Hosted by: Please input business name in your profile!
            %h3#default-text{'ng-show'=>'event.blurb=="" || event.blurb==nil'}
              Event Blurb
            %h3
              {{event.blurb}}
            
            .event-summary-logistics-container
              .event-summary-logistics
                %h3#default-text{'ng-show'=>'event.time=="" || event.time==nil || event.length=="" || event.length==nil || event.date=="" || event.date==nil'}
                  =Time.now().strftime("%A, %B %d, %l:%M%p") 
                  to 
                  =Time.now().strftime("%l:%M%p")
                %h3{'ng-hide'=>'event.time=="" || event.time==nil || event.length=="" || event.length==nil || event.date=="" || event.date==nil'}
                  {{eventDate()}}, from {{eventTime()}} to {{eventEndTime()}}
                %h3#default-text{'ng-show'=>'event.location.neighborhood=="" || event.location.neighborhood==nil'}
                  Neighborhood
                %h3
                  {{event.location.neighborhood}}
                  
            

            %p#default-text{'ng-show'=>'event.people_limit=="" || event.people_limit==nil'}
              0 seats until the event tilts!
            %p{'ng-hide'=>'event.people_limit=="" || event.people_limit==nil'}
              {{event.people_limit}}
              seats until the event tilts!
            .progress.progress-warning
              .bar{:style => "width: 0%"}

